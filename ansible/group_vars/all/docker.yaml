---
# Docker version pinning - managed by Renovate
# renovate: datasource=github-releases depName=moby/moby
docker_version: "29.1.1"
docker_packages:
  - "docker-ce=5:{{ docker_version }}-1~{{ ansible_distribution | lower }}.{{ ansible_distribution_major_version }}~{{ ansible_distribution_release }}"
  - "docker-ce-cli=5:{{ docker_version }}-1~{{ ansible_distribution | lower }}.{{ ansible_distribution_major_version }}~{{ ansible_distribution_release }}"
  - "docker-ce-rootless-extras=5:{{ docker_version }}-1~{{ ansible_distribution | lower }}.{{ ansible_distribution_major_version }}~{{ ansible_distribution_release }}"
  - "containerd.io"
  - "docker-buildx-plugin"
  - "docker-compose-plugin"
docker_packages_state: present
docker_compose_package_state: latest

# containerd configuration - use subdirectory to avoid changing /tmp permissions
containerd_tmp_directory: "/tmp/containerd"

# Log rotation for all containers
docker_daemon_options:
  log-driver: json-file
  log-opts:
    max-size: 10m
    max-file: "3"
