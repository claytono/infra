---
host_ipv4: "172.19.74.31"

# Traefik config files to deploy
traefik_config_files:
  - proxmox

# Tailscale exit node
tailscale_args: --advertise-routes=172.19.74.0/23,172.20.4.0/22 --advertise-exit-node --accept-dns=false
ip_forwarding_enabled: true

# Static network configuration
manage_network: true
interfaces_ether_interfaces:
  - device: eno1
    bootproto: static
    address: "172.19.74.31"
    netmask: "255.255.255.0"
    gateway: 172.19.74.1
    dnsnameservers: 172.19.74.1
    dnssearch: oneill.net
    ip6:
      address: "{{ infrastructure_ipv6_prefix }}::74:{{ host_ipv4.split('.')[3] }}"
      prefix: "{{ infrastructure_ipv6_netmask }}"
      gateway: "{{ infrastructure_ipv6_gateway }}"

# NUT server - monitors UPS devices but does NOT shut itself down
nut_upsmon_extra: |
  SHUTDOWNCMD "/bin/true"
  HOSTSYNC 60
  FINALDELAY 120
  RUN_AS_USER root
  NOTIFYCMD /usr/sbin/upssched
  NOTIFYFLAG ONBATT WALL+EXEC
  NOTIFYFLAG ONLINE WALL+EXEC
  NOTIFYFLAG LOWBATT WALL+EXEC
  NOTIFYFLAG FSD WALL+EXEC
  NOTIFYFLAG COMMBAD WALL+EXEC
  NOTIFYFLAG COMMOK WALL+EXEC
  NOTIFYFLAG REPLBATT WALL+EXEC
  NOTIFYFLAG NOCOMM WALL+EXEC
  NOTIFYFLAG SHUTDOWN WALL+EXEC
