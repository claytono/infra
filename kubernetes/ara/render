#!/usr/bin/env bash

set -eu -o pipefail

BASEDIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
cd "$BASEDIR"

source "$BASEDIR/../scripts/chart-version"

rm -rf helm tmp
mkdir -p tmp helm

# Render ARA chart
helm_template ara ara --namespace ara --values values.yaml --output-dir tmp

# Move rendered templates to helm/ directory
mv tmp/ara/templates/* helm/

# Clean up temporary directory
rm -rf tmp

# Remove test files if present
rm -rf helm/tests

echo "Helm templates rendered successfully to helm/"
