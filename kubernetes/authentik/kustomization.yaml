---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: authentik

resources:
- namespace.yaml
- externalsecret.yaml
- generated/externalsecret-oidc-blueprints.yaml
- authentik-postgres-cluster.yaml
# Authentik resources
- helm/authentik/secret.yaml
- helm/authentik/server/deployment.yaml
- helm/authentik/server/ingress.yaml
- helm/authentik/server/service.yaml
- helm/authentik/worker/deployment.yaml
- helm/authentik/serviceAccount/templates/serviceaccount.yaml
- helm/authentik/serviceAccount/templates/clusterrole.yaml
- helm/authentik/serviceAccount/templates/clusterrolebinding.yaml
- helm/authentik/serviceAccount/templates/role.yaml
- helm/authentik/serviceAccount/templates/rolebinding.yaml
# Valkey resources
- helm/valkey/pvc.yaml
- helm/valkey/scripts.yaml
- helm/valkey/service-internal.yaml
- helm/valkey/services.yaml
- helm/valkey/statefulset.yaml

commonAnnotations:
  argoManaged: 'true'

# ak-collect-blueprints: auto-generated section below
configMapGenerator:
- name: authentik-blueprints
  files:
  - generated/bazarr.yaml
  - generated/prowlarr.yaml
  - generated/radarr.yaml
  - generated/sabnzbd.yaml
  - generated/sonarr.yaml
  - generated/tautulli.yaml
  - generated/alertmanager.yaml
  - generated/goldilocks.yaml
  - generated/grafana.yaml
  - generated/huntarr.yaml
  - generated/prometheus.yaml
  - generated/qbit-manage.yaml
  - generated/outpost.yaml
  options:
    disableNameSuffixHash: true
