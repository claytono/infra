---
schedule: 0 9 * * *  # 09:00 UTC = 4:00 AM EST / 5:00 AM EDT

deschedulerPolicy:
  maxNoOfPodsToEvictPerNamespace: 1
  evictLocalStoragePods: true
  profiles:
  - name: default
    pluginConfig:
    - name: DefaultEvictor
      args:
        evictLocalStoragePods: true
        labelSelector:
          matchExpressions:
          - key: job-name
            operator: DoesNotExist
    - name: PodLifeTime
      args:
        maxPodLifeTimeSeconds: 1209600  # 14 days
        states:
        - Running
    - name: RemovePodsHavingTooManyRestarts
      args:
        podRestartThreshold: 10
        includingInitContainers: true
    plugins:
      deschedule:
        enabled:
        - PodLifeTime
        - RemovePodsHavingTooManyRestarts
  - name: frank-daily-restart
    pluginConfig:
    - name: DefaultEvictor
      args:
        evictLocalStoragePods: true
    - name: PodLifeTime
      args:
        namespaces:
          include:
          - frank
        maxPodLifeTimeSeconds: 86400  # 24 hours
        states:
        - Running
    plugins:
      deschedule:
        enabled:
        - PodLifeTime
