---
apiVersion: external-secrets.io/v1
kind: ClusterExternalSecret

metadata:
  name: iscsi-chap-secret

spec:
  externalSecretName: iscsi-chap-secret
  externalSecretSpec:
    secretStoreRef:
      kind: ClusterSecretStore
      name: production
    refreshInterval: 1h
    target:
      creationPolicy: Owner
      deletionPolicy: Retain
      template:
        type: kubernetes.io/iscsi-chap
        engineVersion: v2
        mergePolicy: Replace
    dataFrom:
    - extract:
        key: iscsi-secrets
        conversionStrategy: Default
        decodingStrategy: None
        metadataPolicy: None
  namespaces:
  - default
