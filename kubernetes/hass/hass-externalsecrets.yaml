---
apiVersion: external-secrets.io/v1
kind: ExternalSecret

metadata:
  name: hass-secrets-file

spec:
  secretStoreRef:
    name: production
    kind: ClusterSecretStore
  target:
    name: hass-secrets-file
    template:
      data:
        secrets.yaml: |
          ---
          # Home Assistant secrets managed by ExternalSecrets/1Password
          latitude: {{ .latitude }}
          longitude: {{ .longitude }}

          roomba_password: {{ .roomba_password | quote }}

          telegram_api_key: {{ .telegram_api_key | quote }}

          mqtt_password: {{ .mqtt_password | quote }}

          netatmo_client_id: {{ .netatmo_client_id }}
          netatmo_client_secret: {{ .netatmo_client_secret }}

          gmail_smtp_password: {{ .gmail_smtp_password | quote }}

          twilio_account_sid: {{ .twilio_account_sid }}
          twilio_auth_token: {{ .twilio_auth_token }}
          twilio_number: {{ .twilio_number | quote }}

          my_phone: {{ .my_phone | quote }}

          opengarage_device_key: {{ .opengarage_device_key }}
  dataFrom:
  - extract:
      key: hass-secrets

---
apiVersion: external-secrets.io/v1
kind: ExternalSecret

metadata:
  name: hass-caseta-certificates

spec:
  secretStoreRef:
    name: production
    kind: ClusterSecretStore
  target:
    name: hass-caseta-certificates
  dataFrom:
  - extract:
      key: hass-caseta-certificates
