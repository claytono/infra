---
deploymentMode: SingleBinary

singleBinary:
  replicas: 1

# Loki config
loki:
  auth_enabled: false
  commonConfig:
    replication_factor: 1
    ring:
      kvstore:
        store: inmemory  # no memberlist in single-node
  storage:
    type: filesystem
  schemaConfig:
    configs:
    - from: 2024-04-01  # any date <= your oldest data
      store: tsdb
      object_store: filesystem
      schema: v13
      index:
        prefix: loki_index_
        period: 24h
  compactor:
    retention_enabled: true
    delete_request_store: filesystem
  limits_config:
    retention_period: 30d
  podAnnotations:
    prometheus.io/scrape: 'true'
    prometheus.io/port: http-metrics
    reloader.stakater.com/auto: 'true'

# If Alloy points at the gateway, keep this; otherwise you can disable it
gateway:
  enabled: true

# Persistence (tune size / storageClass if you care)
persistence:
  enabled: true

# Turn off bits you're not using
monitoring:
  selfMonitoring:
    enabled: false

# Disable rule sidecar (we're not using custom rules)
sidecar:
  rules:
    enabled: false

# Make sure these stay OFF in single-binary
resultsCache:
  enabled: false

chunksCache:
  enabled: false

# force scalable targets OFF
backend:
  replicas: 0

read:
  replicas: 0

write:
  replicas: 0
