---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: restic

resources:
- shared
- rest-server
- cronjobs

commonAnnotations:
  argoManaged: 'true'

configMapGenerator:
- files:
  - profiles.yaml
  - body-start.txt
  - body-success.txt
  - body-failure.txt
  name: resticprofile-config
  options:
    disableNameSuffixHash: true
- files:
  - rclone.conf
  name: rclone-config
  options:
    disableNameSuffixHash: true

images:
- name: alpine
  newTag: 3.23@sha256:865b95f46d98cf867a156fe4a135ad3fe50d2056aa3f25ed31662dff6da4eb62
- name: creativeprojects/resticprofile
  newTag: 0.32.0@sha256:c5b0d32983fcde265839fef5e4d1f0e56fbc4ba8649a476bb9f49eb81efb0c1d

labels:
- includeSelectors: true
  pairs:
    app.kubernetes.io/name: restic
    app.kubernetes.io/instance: restic
