---
apiVersion: external-secrets.io/v1
kind: ExternalSecret

metadata:
  name: synology-csi-client-info

spec:
  refreshInterval: 1h
  secretStoreRef:
    name: production
    kind: ClusterSecretStore
  target:
    name: synology-csi-client-info
    creationPolicy: Owner
    template:
      data:
        client-info.yml: |
          clients:
            - host: "fs2.oneill.net"
              port: 5001
              https: true
              username: "{{ .username }}"
              password: "{{ .password }}"
  data:
  - secretKey: username
    remoteRef:
      key: synology-csi
      property: username
  - secretKey: password
    remoteRef:
      key: synology-csi
      property: password
